cache: apt
language: generic
sudo: required
dist: trusty
notifications:
  slack: jsk-robotics:Av7tc8wj3IWkLYvlTzHE7x2g
  # TEST_TYPE:
  #        1 : Check if this PR works with current downstream package
  #        2 : Check if this PR works with 315.1.10
env:
  global:
    - secure: "ESSo9YL0lUB0nnlFIL1vV7zpOyZjgTign4IZR735laiylPjOLKW4BkP9JxT5alA9ip72qbpDKI192Ed3sSkWjjQxhM+/HIjtyOy5/F6U5wfvxWudorJeF4zCy4OBD7Bp9JWqucAkRmd5Qe3Djaih69rAK31IFeNhQ2Ebz6RWVGk="
  matrix:
    - COMMIT_ID=53d561a288866a9ebf23c2bd07631fe4c5b91594
    - COMMIT_ID=f0fdab28ad08a09da4131d627368f4859c4235c9
    - COMMIT_ID=47c267976b62917ad2907fe6983be2eebe50ab89
    - COMMIT_ID=c6295ed505ec6b39b3d6cf0982732fc69dea1a43
    - COMMIT_ID=593293d07b7c8b89962121f66781c0ec5858c439
    - COMMIT_ID=2dcc568824db344cdde7878d69825d1e5fd3a123
    - COMMIT_ID=21d1f2ab0a37f832e24eba56a05763eaa7833b0c
    - COMMIT_ID=20b1e62c7aa68e8cd4221e839e87790865ffc678
    - COMMIT_ID=188d28509a41c44b8c5c676c30d56c13a9c8a6ba
script:
  - export ROS_DISTRO=indigo
  - export TEST_TYPE=work_with_downstream
  - export TEST_PACKAGE=hironx-ros-bridge
  - export USE_SRC_OPENHRP3=true
  - export DISTRO=trusty
  - export DOCKER_IMAGE=ubuntu:$DISTRO
  - export CI_SOURCE_PATH=$(pwd)
  - docker images
  - docker run -v $HOME:$HOME -e CI_SOURCE_PATH -e HOME -e DISTRO -e ROS_DISTRO -e ROS_LOG_DIR -e TEST_TYPE -e TEST_PACKAGE -e USE_SRC_OPENHRP3 -e COMMIT_ID -e COMILE_OPTION $DOCKER_IMAGE bash -c 'cd $CI_SOURCE_PATH; source .travis.sh'
