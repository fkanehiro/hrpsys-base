<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Basic RT components and utilities: $title</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Basic RT components and utilities
   &#160;<span id="projectnumber">315.12.1</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="introduction"></a>
Overview</h2>
<p>This component is maintain full-body balance based on sensor feedback.</p>
<h3><a class="anchor" id="feature"></a>
Feature</h3>
<p>This component modifies input joint angles to control COG, ZMP, and so on. This component receives reference joint angles from "qRef" inport. Then it solves Inverse Kinematics (or something) based on sensor feedback, obtains jonint angles, and outputs the joint angles as "q" outport.</p>
<h3><a class="anchor" id="mode"></a>
Mode</h3>
<p>This component has modes and behaves as Finite State Machine. By default, this component is idle mode ("MODE_IDLE"), in which it do not modify input joint angles. When <a class="el" href="../../d5/dc8/interfaceOpenHRP_1_1StabilizerService.html#ab2dc22c54f8d1971b141b6fb25191329" title="Start Stabilizer mode.">OpenHRP::StabilizerService::startStabilizer()</a> are called in idle mode, it switches to controlling mode ("MODE_ST"), in which it modifies joint angles. When <a class="el" href="../../d5/dc8/interfaceOpenHRP_1_1StabilizerService.html#afa6244f27acf1d6379ea15957841f0ba" title="Sop Stabilizer mode.">OpenHRP::StabilizerService::stopStabilizer()</a> are called in controlling mode, it switches to idle mode. When this component is controlling mode and the robot is put off to the air, it switches to air mode ("MODE_AIR"), which is similar to idle mode. When this component was air mode and the robot is put on the ground, it switches to controlling mode.</p>
<h3><a class="anchor" id="zdexample"></a>
ZMPDistributor Example</h3>
<p>ZMPDistributor example, in which distributed force and moment are displayed on graphs (COP, Ref-force, Ref-moment, ... etc).</p>
<div class="fragment"><pre class="fragment">testZMPDistributor # Non ROS environment
rosrun hrpsys testZMPDistributor # ROS environment
</pre></div><table class="doxtable">
<tr>
<th>implementation_id</th><td>Stabilizer </td></tr>
<tr>
<th>category</th><td>example </td></tr>
</table>
<h3><a class="anchor" id="stalgo"></a>
Stabilizer algorithm</h3>
<p>Stabilizer algorithm is based on the following papers: <br/>
 </p>
<ul>
<li>
EEFM (partially, EEFMQP, EEFMQPCOP):<br/>
 [1] Shuuji Kajita, Mitsuharu Morisawa, Kanako Miura, Shin’ichiro Nakaoka,Kensuke Harada, Kenji Kaneko, Fumio Kanehiro and Kazuhito Yokoi "Biped Walking Stabilization Based on Linear Inverted Pendulum Tracking", The 2010 IEEE/RSJ International Conference on Intelligent Robots and Systems, p. 4489-4496, 2010 </li>
<li>
TPCC:<br/>
 [2] 長坂,稲葉,井上:"体幹位置コンプライアンスを用いた人間型ロボットの歩行安定化",第 17 回日本ロボット学会学術講演会予稿集, pp.1193–1194, 1999.<br/>
 [3] Y. Choi, D. Kim and B.-J. You: "On the Walking Control for Humanoid Robot based on the Kinematic Resolution of CoM Jacobian with Embedded Motion," Proc. of 2006 IEEE Inter. Conf. on Robotics and Automation, pp.2655–2660, 2006. </li>
</ul>
<h2><a class="anchor" id="dataports"></a>
Data Ports</h2>
<h3><a class="anchor" id="inports"></a>
Input Ports</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>data type</th><th>unit</th><th>description </th></tr>
<tr>
<td>qCurrent</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Actual joint angles </td></tr>
<tr>
<td>qRef</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Reference joint angles </td></tr>
<tr>
<td>rpy</td><td>RTC::TimedOrientation3D</td><td>[rad]</td><td>Actual attitude sensor's Roll-Pitch-Yaw angle  </td></tr>
<tr>
<td>forceL</td><td>RTC::TimedDoubleSeq</td><td>[N],[Nm]</td><td>6D wrench vector for actual force and moment for left leg </td></tr>
<tr>
<td>forceR</td><td>RTC::TimedDoubleSeq</td><td>[N],[Nm]</td><td>6D wrench vector for actual force and moment for right leg </td></tr>
<tr>
<td>zmpRef</td><td>RTC::TimedPoint3D</td><td>[m]</td><td>Reference ZMP in base frame </td></tr>
<tr>
<td>basePosIn</td><td>RTC::TimedPoint3D</td><td>[m]</td><td>Reference base position </td></tr>
<tr>
<td>baseRpyIn</td><td>RTC::TimedOrientation3D</td><td>[rad]</td><td>Reference base orientation (Roll-Pitch-Yaw) </td></tr>
<tr>
<td>contactStates</td><td>RTC::TimedBooleanSeq</td><td>NA</td><td>Reference end-effector contact states (True=contact, False=no-contact) </td></tr>
<tr>
<td>controlSwingSupportTime</td><td>RTC::TimedDouble</td><td>[s]</td><td>Time of swing phase </td></tr>
</table>
<h3><a class="anchor" id="outports"></a>
Output Ports</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>data type</th><th>unit</th><th>description </th></tr>
<tr>
<td>q</td><td>RTC::TimedDoubleSeq</td><td>[rad]</td><td>Output reference joint angles </td></tr>
<tr>
<td>zmp</td><td>RTC::TimedPoint3D</td><td>[m]</td><td>Estimated actual ZMP in base frame </td></tr>
</table>
<h2><a class="anchor" id="serviceports"></a>
Service Ports</h2>
<h3><a class="anchor" id="provider"></a>
Service Providers</h3>
<table class="doxtable">
<tr>
<th>port name</th><th>interface name</th><th>service type</th><th>IDL</th><th>description </th></tr>
<tr>
<td>StabilizerService</td><td>service0</td><td>StabilizerService</td><td><a class="el" href="../../d5/dc8/interfaceOpenHRP_1_1StabilizerService.html">OpenHRP::StabilizerService</a></td><td>StabilizerService </td></tr>
</table>
<h3><a class="anchor" id="consumer"></a>
Service Consumers</h3>
<p>N/A</p>
<h2><a class="anchor" id="configuration"></a>
Configuration Variables</h2>
<table class="doxtable">
<tr>
<th>name</th><th>type</th><th>unit</th><th>default value</th><th>description </th></tr>
<tr>
<td>debugLevel</td><td>int</td><td></td><td>0</td><td>debug level </td></tr>
</table>
<h2><a class="anchor" id="conf"></a>
Configuration File</h2>
<p>N/A </p>
</div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Tue May 2 2017 07:41:46 for Basic RT components and utilities by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
